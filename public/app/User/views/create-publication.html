<h5>Новая публикация</h5>
<div class="publication">
	<div class="publication-item">
		<a class="user" ui-sref="user({username: $root.user.username})" ng-click="closePopup()">
			<span class="ava">
				<img ng-src="{{userData.avatar_path}}" alt="">
			</span>
			<p class="user-name">{{userData.first_name}} {{userData.last_name}}</p>
		</a>
		<!-- <form action="">
			<input type="checkbox" id="anon" ng-model="isAnonPub">
			<label for="anon">
				<span></span>
				Анонимная публикация
			</label>
		</form> -->
	</div>	
	<div class="text-field">	
		<div emoji-form emoji-message="emojiMessage">
			<textarea id="messageInput" ng-model="emojiMessage.messagetext"></textarea>
			<a href="javascript:void(0);" class="emoji-button" id="emojibtn">
				<i class="icon icon-emoji"></i>
			</a>
		</div>		
	</div>		
		<div class="new-add" ng-show="showPubAdd" ng-scrollbar rebuild-on="rebuild:me" bottom rebuild-on-resize style="max-height: 250px; overflow:hidden; position:relative;">
			<div class="new-img" ng-repeat="file in pubNew.files">
				<div class="inner" ng-mouseenter="file.showIsCover=true" ng-mouseleave="file.showIsCover=false">
					<div class="close" ng-click="deletePubFile($index)">
						<div class="close-inner">
							<p>Удалить</p>
						</div>
					</div>
					<img ngf-thumbnail="file || '/thumb.jpg'">
					<video width="200px" controls ngf-src="file"></video>
					<div class="check" ng-class="{'js-isShow': file.isCover}" ng-click="setMainPubPhoto($index)" ng-show="file.showIsCover || file.isCover">
						<div class="check-inner">
							<p>{{file.isCover ? 'Заставка публикации' : 'Сделать заставкой публикации'}}</p>
						</div>
					</div>
				</div>
				<p class="img-name">{{file.name}}</p>
			</div>
		</div>
	<div class="publication-footer" >
		<div class="add-objects">
			<input id="add-object" type="file"
				   ngf-keep="true" style="display: none;"
				   ngf-select
				   ng-model="filesPreview"
				   ngf-change="pubFiles($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"
				   ngf-multiple="true">
			<label for="add-object" ng-click="openPublicationPreviewBlock(picFile); publishNewPubErr=false;">
			<span class="add"></span>
				Добавить фото или видео *
			</label>
		</div>
		<div class="publication-footer-button">
			<a href="" class="cansel" ng-click="closePopup();">Отменить</a>
			<!-- <a href="" class="publication-button" ng-click="publishNewPub(files);" ladda="newPubLoader">Опубликовать</a> -->
			<button class="publication-button" ng-click="publishNewPub(emojiMessage);" ladda="newPubLoader" ng-disabled="newPubLoader">Опубликовать</button>
		</div>       
	</div>
	<p ng-style="publishNewPubErr && {'color':'red'}" class="publication-text"><span>* </span>Для создания публикации обязательным является добавление фото или видео</p>
</div>