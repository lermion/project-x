<div style="min-height: 100%;">	
	<div class="user-main-content">
		<div class="user-main-content-item">
			<header>
				<div class="header header-user">
					<a class="logo" ui-sref="feed"></a>
					<div class="main-menu" ng-click="openMenu();" ng-class="showMenu ? 'show-menu' : ''" ng-init="showMenu=true;">			
						<a class="drop-menu" href=""></a>
						<div class="menu-item" ng-show="showMenu">
							<a class="profile" ui-sref="user({username: loggedUser})">Мой профиль</a>
							<a class="places" href="">Места</a>
							<a class="chat" href=""> Чаты</a>
							<a class="settings" ui-sref="settings">Настройки</a>
							<div class="search">
								<input type="text" placeholder="Поиск...">
								<span class="button"></span>
							</div>
						</div>
					</div>
					<div class="search">
						<input type="text" placeholder="Поиск...">
						<span class="button"></span>
					</div>
					<a class="exit" href="javascript:void(0);" ng-click="logOut()"><span></span>Выйти</a>
				</div>
			</header>	
			<div class="content-user">		
				<div id="user-page">
					<div class="my-profile">
						<div class="ava">
							<a href="">
								<img ng-src="{{userData.avatar_path}}" alt="">
							</a>
						</div>
						<div class="my-profile-item"> 
							<div class="user-status">
								<a class="user-name" href="" ng-hide="profileEdition">{{userData.first_name}} {{userData.last_name}}</a>
								<div class="rewrite-fields">
									<input type="text" ng-show="profileEdition" placeholder="Имя" ng-model="userData.first_name">
									<input type="text" ng-show="profileEdition" placeholder="Фамилия" ng-model="userData.last_name">
								</div>
								<p>{{userData.is_online ? 'Online' : 'Offline'}}</p>
							</div>
							
							<div class="counts" ng-class="myProfile ? '' : 'another-user'" >
								<a href="" class="counter">
									<p class="notes">Публикации</p>
									<span>{{userData.publications_count}}</span>
								</a>
								<a href="" class="counter" ng-show="myProfile">
									<p class="contacts">Контакты</p>
									<span>417</span>
								</a>
								<a href="" class="counter" ng-click="userData.subscribers_count > 0 && openSubscribers(userData.id)">
									<p class="contacts-off">Подписчики</p>
									<span>{{userData.subscribers_count}}</span>
								</a>
								<a href="" class="counter" ng-click="userData.subscription_count > 0 && openSubscribe(userData.id)">
									<p class="contacts-on">{{myProfile ? 'Я подписан' : 'Подписки'}}</p>
									<span>{{userData.subscription_count}}</span> 
								</a>
							</div>
							<p class="status-user" ng-hide="profileEdition" ng-bind-html="userData.status | colonToSmiley">{{userData.status}}</p>	
							<!-- <div ng-bind-html="text | colonToSmiley">{{text}}</div>				 -->
							<input class="status-correct" type="text" name="" ng-show="profileEdition && !showStatusArea" ng-model="userData.status" ng-model-options="{updateOn: 'blur'}"  ng-class="statusErr? 'error-status':''" ng-click="statusErr=false;">
							<p ng-show="statusErr" class="error" ng-show="profileEdition">Статус не может быть больше 140 символов</p>
							<div class="comunications" ng-show="myProfile">
								<a href="" class="create" ng-click="createPublication()">Создать публикацию</a>
								<a href="" class="rewrite" ng-click="editProfile(userData.first_name, userData.last_name, userData.status);">{{profileEdition ? 'Сохранить' : 'Редактировать'}}</a>
								<div class="view" ng-init="photosGrid=true;">
									<a href="" ng-class="photosGrid ? 'active' : ''" class="table" ng-click="photosGrid=true;"></a>
									<a href="" ng-class="!photosGrid ? 'active' : ''" class="list" ng-click="photosGrid=false;"></a>
								</div>
							</div>
							<div class="comunications" ng-hide="myProfile">
								<a href="" class="read" ng-click="sign()">{{isSigned ? 'Отписаться' : 'Подписаться'}}</a> 
								<div class="view" ng-init="photosGrid=true;">
									<a href="" ng-class="photosGrid ? 'active' : ''" class="table" ng-click="photosGrid=true;"></a>
									<a href="" ng-class="!photosGrid ? 'active' : ''" class="list" ng-click="photosGrid=false;"></a>
								</div>
							</div>
						</div>
					</div>
					<p class="status-user adaptiv" ng-hide="profileEdition || showStatusArea">{{userData.status}}</p>
					<input class="status-correct adaptiv" type="text" name="" ng-show="showStatusArea" ng-model="userData.status" ng-model-options="{updateOn: 'blur'}"  ng-class="statusErr? 'error-status':''" ng-click="statusErr=false;">
					<p ng-show="statusErr" class="error adaptiv" ng-show="profileEdition" >Статус не может быть больше 140 символов</p>
					<div class="comunications adaptiv" ng-show="myProfile">
						<a href="" class="create" ng-click="createPublication()">Создать публикацию</a>
						<a href="" class="rewrite" ng-click="editProfile(userData.first_name, userData.last_name, userData.status);">{{profileEdition ? 'Сохранить' : 'Редактировать'}}</a>
						<div class="view">
							<a href="" ng-class="photosGrid ? 'active' : ''" class="table" ng-click="photosGrid=true;"></a>
							<a href="" ng-class="!photosGrid ? 'active' : ''" class="list" ng-click="photosGrid=false;"></a>
						</div>
					</div>
					<div class="comunications adaptiv" ng-hide="myProfile">
						<a href="" class="read" ng-click="isSigned=!isSigned;">{{isSigned ? 'Отписаться' : 'Подписаться'}}</a>				
						<div class="view">
							<a href="" ng-class="photosGrid ? 'active' : ''" class="table" ng-click="photosGrid=true;"></a>
							<a href="" ng-class="!photosGrid ? 'active' : ''" class="list" ng-click="photosGrid=false;"></a>
						</div>
					</div>
					<!-- unit grid-->						
					<div class="my-photos" ng-show="photosGrid">
						<div class="photo" ng-repeat="pub in userPublications" style="{{resizeSizes}}">				
							<a href="" ng-click="showPublication(pub)">
								<img ng-src="{{pub.images[0].url}}" alt="">								
							</a>
						</div>
					</div>

					<!-- single unit -->
					<div class="my-photos-list" ng-show="!photosGrid">
						<div class="my_profilll photo-list" ng-repeat="singlePublication in userPublications" style="{{resizeHeight}}" ng-init="singlePublication.cover ? singlePublication.mainFile.url = singlePublication.cover : singlePublication.mainFile.url = singlePublication.images[0].url">
							<div class="ngdialog-content" role="document">
								<div class="user-publication">
									<div class="user-publication-content">

										<div class="publication-ava" ng-init="singlePublication.mainFile.pivot ? '' : singlePublication.mainFile.pivot.image_id = true;">
											<a href="javascript:void(0);"  class="ava" ng-click="showPublication(singlePublication)">
												<img ng-src="{{singlePublication.mainFile.url}}" ng-if="singlePublication.mainFile.pivot.image_id">
											</a>
											<video ng-if="singlePublication.mainFile.pivot.video_id" width="150px" controls ngf-src="singlePublication.mainFile.url"></video>
										</div>
										<div class="publication-images" ng-scrollbar rebuild-on="loadPubFiles" style="max-height:175px; overflow:hidden; position:relative;" ng-hide="(singlePublication.images.length + singlePublication.videos.length) === 1" ng-init="singlePublication.limit = 6">											
											<div ng-click="changeMainFile(file, 'list', singlePublication)" ng-repeat="file in singlePublication.images.concat(singlePublication.videos) | limitTo: singlePublication.limit as results" class="images-item" ng-init="rebuildScroll()">
												<img ng-src="{{file.url}}" ng-if="file.pivot.image_id">
												<video width="150px" controls ngf-src="file.url" ng-if="file.pivot.video_id"></video>				
											</div>

											<div ng-hide="results.length === (singlePublication.images.length + singlePublication.videos.length)" class="images-item more" ng-click="loadMorePubFiles(results.length === (singlePublication.images.length + singlePublication.videos.length), 'list', singlePublication)">
												<p class="counter">Еще<br> {{(singlePublication.images.length + singlePublication.videos.length)  - singlePublication.limit}} файлов</p>
											</div>

										</div> 
										<p class="publication-text" ng-bind-html="singlePublication.text | colonToSmiley">{{singlePublication.text}}</p>
										<a href="javascript:void(0);" class="publication-place">г. Лондон</a>
									</div>
									<div class="likes">
										<div class="likes-item">
											<a href="javascript:void(0);" ng-click="addPublicationLike(singlePublication, singlePublication.user.id == loggedUserId)" class="like">Тема</a>
											<p class="like-item">
												В теме 
												<span ng-if="singlePublication.user_like" class="you"> Вы </span>
												<span ng-if="singlePublication.user_like" class="more">и еще</span>
												<span class="count-like">{{singlePublication.user_like ? singlePublication.like_count - 1 : singlePublication.like_count}}</span>
												чел.
											</p>
										</div>
										<a href="javascript:void(0);" class="comments-count">{{singlePublication.comment_count}}</a>
									</div>
									<div class="more-comments" ng-if="singlePublication.comments.length !== singlePublication.comment_count">
										<a href="javascript:void(0);" ng-click="getAllCommentsPublication('userPage', singlePublication, true)" class="all-comments">Еще {{singlePublication.comment_count - 3}} комментариев</a>
									</div>
									<div ng-hide="singlePublication.comments.length === 0" class="visible-comments">
										<div ng-repeat="comment in singlePublication.comments | reverse" class="user-comment">
											<div class="user-ava">
												<a class="ava" ui-sref="user({username: loggedUser})">
													<img ng-src="{{comment.user.avatar_path}}" alt="">
												</a>
											</div>
											<div class="comment">
												<div class="user-info">				
													<div class="info-item">
														<a class="user-name" ui-sref="user({username: comment.user.login})">{{comment.user.first_name}} {{comment.user.last_name}}</a>
														<p class="time" am-time-ago="comment.created_at"></p>
														<a href="javascript:void(0);" ng-click="addCommentLike(comment)" class="like-counter">{{comment.like_count}}</a>
													</div>
													<a href="javascript:void(0);" ng-click="deleteComment('userPage', singlePublication, comment, $index)" class="alert"><!-- Пожаловаться{{hideSomePubText ? 'Пожаловаться':''}} --></a>
												</div>
												<p class="comment-item" ng-bind-html="comment.text | colonToSmiley">{{comment.text}}</p>
												<div ng-if="comment.images[0]" class="comment-pic">
													<a ng-repeat="image in comment.images | limitTo: 3 as results" ng-click="showMoreImages(comment.images)" href="javascript:void(0);" class="comment-pic-item">
														<img ng-src="{{image.url}}">
													</a>
													<a ng-show="comment.images.length >= 4" href="javascript:void(0);" ng-click="showMoreImages(comment.images)" class="comment-pic-item">
														<p>Ещё {{comment.images.length - 3}} фото</p>
													</a>
												</div>
											</div>
										</div>
									</div>
									<div class="added_comments">
										<a href="javascript:void(0);" class="add_comments" ng-click="showAddCommentBlock = !showAddCommentBlock" ng-hide="showAddCommentBlock">
											Добавить комментарий 
										</a>
									</div>
									<div class="add-comment"  ng-show="showAddCommentBlock">
										<div class="user-ava">
											<a class="ava" ui-sref="user({username: loggedUser})">
												<img ng-src="{{userData.avatar_path}}" alt="">
											</a>
										</div>
										<div flow-init style="position:relative;" class="add">
											<div class="text-field">
												<textarea name="" id="" placeholder="Текст комментария..." ng-model="commentModel.pubText"></textarea>
											</div>	
											
											<div class="new-add">
												<div class="new-img" ng-repeat="file in singlePublication.files">  
													<div class="inner">
														<div ng-click="deletePubFile(singlePublication.files, $index)" class="close">
															<div class="close-inner">
																<p>Удалить</p>
															</div>
														</div>								
														<img ngf-thumbnail="file || '/thumb.jpg'">
														<video width="200px" controls ngf-src="file"></video>	
													</div>
													<p class="img-name">{{file.name}}</p>
												</div>
											</div>
											<div class="publication-footer" ng-init="addFileObjId = 'add-file-to-comment-'+singlePublication.id">
												<div class="publication-footer-button">
													<a href="javascript:void(0);" ng-click="addNewComment('userPage', singlePublication, commentModel.pubText, singlePublication.files);" class="publication-button">Отправить</a>    
												</div>
												<div class="add-objects">						
													<input id="{{addFileObjId}}" style="display: none;" ngf-select ng-model="singlePublication.files" ngf-multiple="true"> 
													<label for="{{addFileObjId}}">
														Прикрепить
														<span class="add"></span>
													</label>                                         
												</div>   
											</div>

										</div>
									</div>
								</div>
							</div>

						</div>
					</div>



				</div>
			</div>
			<footer>
				<div class="footer">
				    <div class="footer-item">
				                <div class="footer-place">
				                    <a href="">Place People </a>
				                    <span>© 2016</span>
				                </div>
				                <div class="payment">
				                    <a class="mastercard" href=""></a>
				                    <a class="visa" href=""></a>
				                </div>
				    </div>
				    <div class="menu" ng-click="openBottomMenu()" ng-class="showBottomMenu ? 'open-bottom-menu' : ''" ng-init="showBottomMenu=true;">
				        <a class="drop-menu" href="" ></a>
				        <div class="menu-item" ng-show="showBottomMenu">		        	       
				            <a ng-repeat="staticPage in staticPages" ui-sref="static({ pageName: staticPage.name})">{{staticPage.description}}</a>		            
				        </div>
				    </div>
				</div>
			</footer>
		</div>
	</div>
</div>