<h5>Редактировать публикацию</h5>
<div class="publication">
	<div class="text-field">				
		<div emoji-form emoji-message="vm.emojiMessage">
		<textarea id="messageInput" ng-model="vm.emojiMessage.messagetext"></textarea>
			<a href="javascript:void(0);" class="emoji-button" id="emojibtn">
				<i class="icon icon-emoji"></i>
			</a>
		</div>
	</div>	
		<div class="new-add" ng-scrollbar rebuild-on="loadPubFiles || rebuild:me" style="max-height: 250px; overflow:hidden; position:relative;" ng-init="vm.editedPubFiles(vm.activePublication)">
			<div class="new-img" ng-repeat="file in vm.editedPubFilesArray" ng-init="rebuildScroll()">
				<div class="inner">
					<div class="close" ng-click="vm.editedPubDeleteFile($index, file.id, file.pivot)">
						<div class="close-inner">
							<p>Удалить</p>
						</div>
					</div>					
					<img ng-src="{{file.url}}" ng-if="file.pivot.image_id">
					<video width="150px" controls ngf-src="file.url" ng-if="file.pivot.video_id"></video>
					<!-- <div class="check" ng-click="setMainPubPhoto(file)" style="{{$index === 0  ? 'display:block;' : ''}}">	
						<div class="check-inner">
							<p>{{mainPubPhoto === file.file.name ? 'Заставка публикации' : 'Сделать заставкой публикации'}}</p>
						</div>
					</div> -->
				</div>
				<p class="img-name">{{file.name}}</p>
			</div>
			<div class="new-img" ng-repeat="file in vm.files"  ng-click="showMoreImages(files)">
				<div class="inner">
					<div class="close" ng-click="vm.deletePubFile(vm.files, $index)">
						<div class="close-inner">
							<p>Удалить</p>
						</div>
					</div>
					<img ngf-thumbnail="file || '/thumb.jpg'">
					<video width="200px" controls ngf-src="file"></video>
					<!-- <div class="check" ng-click="setMainPubPhoto(file)" style="{{mainPubPhoto === file.file.name ? 'display:block;' : ''}}">	
						<div class="check-inner">
							<p>{{mainPubPhoto === file.file.name ? 'Заставка публикации' : 'Сделать заставкой публикации'}}</p>
						</div>
					</div> -->
				</div>
				<p class="img-name">{{file.name}}</p>
			</div>
		</div>
	<div class="publication-footer" >
		<div class="add-objects"> 
			<input id="edited-pub-add-object" type="file" ngf-keep="true" style="display: none;" ngf-select ng-model="vm.files" ngf-before-model-change="vm.pubFiles($files)" ngf-multiple="true">
			<label for="edited-pub-add-object">
				<span class="add"></span>
				Добавить фото или видео *
			</label>                                         
		</div>
		<div class="publication-footer-button">
			<a href="" class="cansel" ng-click="closeThisDialog()">Отменить</a>
			<a href="" class="publication-button" ng-click="vm.saveEditedPub(vm.activePublication.id, emojiMessage, files);" ladda="vm.updatePubLoader">Сохранить</a>
		</div>       
	</div>
	<p class="publication-text"><span>*</span> Для создания публикации обязательным является добавление фото или видео</p>
</div> 