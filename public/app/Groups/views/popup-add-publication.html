<form name="vm.forms.newPublication" novalidate>
    <h5>Новая публикация</h5>
    <div class="publication">
        <div class="publication-item">
            <a class="user" ui-sref="user({username: vm.userName})">
			<span class="ava">
				<img ng-src="{{vm.group.avatar}}" alt="Avatar group">
			</span>

                <p class="user-name">{{::vm.group.name}}</p>
            </a>
        </div>
        <div class="text-field">

            <div emoji-form emoji-message="vm.emoji.emojiMessage">
                <textarea id="messageInput" ng-model="vm.emojiMessage.messagetext"></textarea>
                <a href="javascript:void(0);" class="emoji-button" id="emojibtn">
                    <i class="icon icon-emoji"></i>
                </a>
            </div>
        </div>
        <div class="new-add" ng-show="showPubAdd" ng-scrollbar rebuild-on="rebuild:me"
             style="max-height: 250px; overflow:hidden; position:relative;">

            <div class="new-img" ng-repeat="file in vm.files" ng-click="showMoreImages(files, file)">
                <div class="inner">
                    <div class="close" ng-click="deletePubFile(files, $index)">
                        <div class="close-inner">
                            <p>Удалить</p>
                        </div>
                    </div>
                    <img ngf-thumbnail="file || '/thumb.jpg'">
                    <video width="200px" controls ngf-src="file"></video>
                    <!-- <div class="check" ng-click="setMainPubPhoto(file)" style="{{mainPubPhoto === file.file.name ? 'display:block;' : ''}}">
                        <div class="check-inner">
                            <p>{{mainPubPhoto === file.file.name ? 'Заставка публикации' : 'Сделать заставкой публикации'}}</p>
                        </div>
                    </div> -->
                </div>
                <p class="img-name">{{file.name}}</p>
            </div>
        </div>
        <div class="publication-footer">
            <div class="add-objects">
                <input id="add-main-pub-object" style="display: none;" ngf-select ng-model="vm.files" ngf-multiple="true"
                       ngf-before-model-change="pubFiles($files)" ngf-keep="true">
                <label for="add-main-pub-object" ng-click="openPublicationPreviewBlock(picFile); publishNewPubErr=false;">
                    <span class="add"></span>
                    Добавить фото или видео *
                </label>
            </div>
            <div class="publication-footer-button">
                <a href="" class="cansel" ng-click="closeThisDialog()">Отменить</a>
                <button class="publication-button" ng-click="publishNewPub(isAnonPub, files, emojiMessage);"
                        ladda="newPubLoader" ng-disabled="newPubLoader">Опубликовать
                </button>
            </div>
        </div>
        <p class="publication-text"><span>* </span>{{ publishNewPubErr ? 'В публикации обязательны текст и файл' : 'Для
            создания публикации обязательным является добавление фото или видео'}} </p>
    </div>
</form>
